<!-- core/templates/user_public_profile.html -->
{% extends "base.html" %}
{% block title %}{{ profile_user.username }}'s Profile{% endblock %}

{% block content %}
<div class="card">
    <div class="card-header">
        <h3>{{ profile_user.username }}'s Public Profile</h3>
    </div>
    <div class="card-body">
        <p><strong>Location:</strong> {{ profile_user.profile.location|default:"Not specified" }}</p>
        <p><strong>Availability:</strong> {{ profile_user.profile.availability|default:"Not specified" }}</p>
        <hr>
        <h4>Skills Offered:</h4>
        <p>
            {% for skill in profile_user.profile.skills_offered.all %}
                <span class="badge fs-6 bg-success">{{ skill.name }}</span>
            {% empty %}
                <span class="text-muted">This user hasn't listed any skills they offer.</span>
            {% endfor %}
        </p>
        <h4>Skills Wanted:</h4>
        <p>
            {% for skill in profile_user.profile.skills_wanted.all %}
                <span class="badge fs-6 bg-info">{{ skill.name }}</span>
            {% empty %}
                <span class="text-muted">This user hasn't listed any skills they want.</span>
            {% endfor %}
        </p>
        <hr>
        <div class="d-grid">
            {% if profile_user.id == request.user.id %}
                <a href="{% url 'profile' %}" class="btn btn-secondary">This is your profile. Edit it here.</a>
            {% elif swap_exists %}
                <button class="btn btn-secondary" disabled>Swap Request Already Sent/Exists</button>
            {% else %}
                <form method="post" action="{% url 'send_swap_request' profile_user.id %}">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-primary btn-lg w-100">
                        <i class="bi bi-arrow-repeat"></i> Request a Swap
                    </button>
                </form>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}